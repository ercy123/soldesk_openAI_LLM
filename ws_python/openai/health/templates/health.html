<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Club Trainer</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script>
        window.onload= function(){
            send.addEventListener('click', async function () {
                const healthData = {
                    weight: document.getElementById('weight').value,
                    bodyFat: document.getElementById('bodyFat').value,
                    height: document.getElementById('height').value,
                    muscleMass: document.getElementById('muscleMass').value,
                    goalWeight: document.getElementById('goalWeight').value,
                    goalBodyFat: document.getElementById('goalBodyFat').value,
                    goalMuscleMass: document.getElementById('goalMuscleMass').value,
                    memberno: {{data.memberno}}

                };
        
                await fetch('http://127.0.0.1:5000/get_workout', {
                    'method': 'POST',
                    'headers': {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(healthData)
                })
                .then((response)=> response.json())
                .then((data) => {
                    let result = data['운동추천목록']
                    let str = '<div>'
                    result.forEach(workout => {
                        str = str +`<p>운동명 : ${workout.운동명} ,  설명 : ${workout.설명}</p>`
                    })
                    str = str + '</div>';
                    console.log(str)
                    document.getElementById('workoutResult').innerHTML = str;
                })
              }
            )
        }
    </script>
</head>
<body class="bg-light">

<div class="container mt-5">
    <h1 class="text-center">Health Club Trainer</h1>

    <div class="card shadow p-4">
        <h3>회원 건강 정보 입력</h3>
        <form  class="row g-3">
            <!-- 회원 건강 정보 -->
            <div class="col-md-6">
                <label for="weight" class="form-label">체중</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="weight" placeholder="체중을 입력하세요" value="80">
                    <span class="input-group-text">kg</span>
                </div>
            </div>

            <div class="col-md-6">
                <label for="bodyFat" class="form-label">체지방률</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="bodyFat" placeholder="체지방률을 입력하세요" value="20">
                    <span class="input-group-text">%</span>
                </div>
            </div>

            <div class="col-md-6">
                <label for="height" class="form-label">신장</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="height" placeholder="신장을 입력하세요" value="180">
                    <span class="input-group-text">cm</span>
                </div>
            </div>

            <div class="col-md-6">
                <label for="muscleMass" class="form-label">골격근량</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="muscleMass" placeholder="골격근량을 입력하세요" value="30">
                    <span class="input-group-text">kg</span>
                </div>
            </div>

            <!-- 운동 목표 -->
            <h3 class="mt-4">운동 목표</h3>

            <div class="col-md-6">
                <label for="goalWeight" class="form-label">목표 체중</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="goalWeight" placeholder="목표 체중을 입력하세요" value="75">
                    <span class="input-group-text">kg</span>
                </div>
            </div>

            <div class="col-md-6">
                <label for="goalBodyFat" class="form-label">목표 체지방률</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="goalBodyFat" placeholder="목표 체지방률을 입력하세요" value="18">
                    <span class="input-group-text">%</span>
                </div>
            </div>

            <div class="col-md-6">
                <label for="goalMuscleMass" class="form-label">목표 골격근량</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="goalMuscleMass" placeholder="목표 골격근량을 입력하세요" value="32">
                    <span class="input-group-text">kg</span>
                </div>
            </div>

            <!-- 제출 버튼 -->
            <div class="col-12">
                <button type="button" id='send' class="btn btn-primary w-100">운동 추천 받기</button>
            </div>
        </form>

        <!-- 추천 운동 목록 -->
        <h3 class="mt-4">추천 운동 목록:</h3>
        <pre id="workoutResult" class="p-3 bg-light border rounded"></pre>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
