<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatGPT Youtube 번역기</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    window.onload = () => {
      send.addEventListener("click", async function () {
        let url = document.getElementById("url").value;
        // alert(url);
        // return;

        let panel = document.getElementById("panel");
        panel.innerHTML = '<img src="/static/images/progress.gif" style="width: 5%; margin-top: 20px;">'; 
        panel.style.display = "block"; // 출력

        let result = document.getElementById("result"); // 원문 출력
        result.style.display = "none"; // 숨김

        let result_kor = document.getElementById("result_kor"); // 한글 출력
        result_kor.style.display = "none";

        await fetch("http://127.0.0.1:5000/youtube", {
            "method": "post",
            "headers": {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({url}) // 보내는 데이터, {"url":url}
        })
        .then((response) => response.json()) // 응답
        .then((data) => {
          // console.log('-> data: ' + data);

          result.innerHTML = data.result;
          result_kor.innerHTML = data.result_kor.res;
          panel.style.display = "none";       // animation 숨김
          result.style.display = "block";     // 원문 출력
          result_kor.style.display = "block"; // 한글 출력
        });
      });
    }

  </script>

</head>
<body>
  <div style="margin: 10px auto; width: 90%;">
    <h3>ChatGPT Youtube 요약</h3>
    <input type='text' id="url" name="url" value="https://www.youtube.com/watch?v=O5nskjZ_GoI" style="width: 100%;"><br><br>
    <button id="send" class="btn btn-info btn-sm">Youtube 요약 하기</button> <br />
    <br />  
    <div id="panel" style="margin-top: 10px; width: 100%; height: 50px; text-align: center; display: none;"></div>
    <textarea id="result" style="margin-top: 10px; width: 100%; height: 150px; display: none;"></textarea><br>
    <textarea id="result_kor" style="margin-top: 10px; width: 100%; height: 150px; display: none;"></textarea>

  </div>

</body>
</html>

